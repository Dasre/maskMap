(this.webpackJsonpmaskmap=this.webpackJsonpmaskmap||[]).push([[0],{185:function(e,t,a){e.exports=a(343)},341:function(e,t,a){},343:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(25),l=a.n(o),c=a(42),i=a(161),s=a(54),u=a(355),p=a(39),m=a(27),d=a(40),h=a(41),g=a(43),E=a(62),f=a(353),b=a(344),O=a(350),k=a(63),w=a(110),v=a.n(w),j=a(162),y=a(111),T=a.n(y),_=function(){return function(){var e=Object(j.a)(v.a.mark((function e(t,a){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.geolocation.getCurrentPosition((function(e){t({type:"GET_COORDINATES",payload:{lat:e.coords.latitude,lon:e.coords.longitude}})}));case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},C=a(352),S=a(351),A=a(66);function D(){var e=Object(E.a)(["\n  margin-left: 1em !important;\n  margin-right: 1em !important;\n"]);return D=function(){return e},e}var I=Object(k.a)(C.a)(D()),x=Object(c.b)((function(e){return{nowData:e.nowData}}),null)((function(e){var t=e.nowData;return r.a.createElement(r.a.Fragment,null,r.a.createElement(I,null,r.a.createElement(C.a.Content,{header:t.select[0].properties.name}),r.a.createElement(C.a.Content,null,r.a.createElement(S.a,{bulleted:!0},r.a.createElement(S.a.Item,null,"\u96fb\u8a71\uff1a",t.select[0].properties.phone),r.a.createElement(S.a.Item,null,"\u5730\u5740\uff1a",t.select[0].properties.address),r.a.createElement(S.a.Item,null,"\u6210\u4eba\u53e3\u7f69\uff1a",r.a.createElement(A.a,{horizontal:!0,color:t.select[0].properties.mask_adult>100?"green":"red"},t.select[0].properties.mask_adult)),r.a.createElement(S.a.Item,null,"\u5152\u7ae5\u53e3\u7f69\uff1a",r.a.createElement(A.a,{horizontal:!0,color:t.select[0].properties.mask_child>50?"green":"red"},t.select[0].properties.mask_child)),r.a.createElement(S.a.Item,null,"\u71df\u696d\u6642\u9593\uff1a",t.select[0].properties.note))),r.a.createElement(C.a.Content,{extra:!0},"\u6b64\u8cc7\u6599\u6700\u5f8c\u66f4\u65b0\u6642\u9593\uff1a",t.select[0].properties.updated)))}));function z(){var e=Object(E.a)(["\n  margin-bottom: 10px;\n"]);return z=function(){return e},e}function G(){var e=Object(E.a)(["\n  background: #EFF8FF !important;\n"]);return G=function(){return e},e}var N=Object(k.a)(f.a.Item)(G()),F=k.a.div(z()),P=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).changeState=function(e){a.setState({input:e.target.value})},a.getPosition=function(){a.props.getTargetPosition(a.state.input)},a.state={input:""},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement(f.a,{vertical:!0,style:{height:"100vh",width:"100%"}},r.a.createElement(N,null,r.a.createElement(F,null,"\u76ee\u524d\u4f4d\u7f6e\uff1a",r.a.createElement(b.a,{content:"\u53d6\u5f97\u76ee\u524d\u4f4d\u7f6e",primary:!0,onClick:this.props.getCoordinates})),r.a.createElement("div",null,r.a.createElement(O.a,{id:"search",icon:"search",value:this.state.input,onChange:this.changeState}),r.a.createElement(b.a,{content:"\u641c\u5c0b",primary:!0,onClick:this.getPosition}),r.a.createElement("p",null,"\u641c\u5c0b\u6240\u5728\u7e23\u5e02\u3001\u5730\u5740\u3001\u5468\u62db\u5e97\u5bb6\u540d\u7a31\u7b49"))),0!==this.props.nowData.length?r.a.createElement(x,null):null)}}]),t}(n.Component),M=Object(c.b)((function(e){return{nowData:e.nowData}}),{getTargetPosition:function(e){return function(t,a){var n="https://nominatim.openstreetmap.org/?q=".concat(e,"&format=json&limit=1");T.a.get(n).then((function(e){console.log(e.data),t({type:"GET_TARGETPOSITION",payload:{lat:e.data[0].lat,lon:e.data[0].lon}})}))}},getCoordinates:_})(P),U=a(7),R=a.n(U),L=a(156),J=a(157),K=a(155),W=a(158),X=a(172),q=a.n(X),B=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).handleClick=function(e){var t=e.latlng.lng,n=a.props.data.filter((function(e){return e.geometry.coordinates[0]===t}));a.props.getNowSelectData(n)},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.props.getMaskData(),this.props.getCoordinates()}},{key:"render",value:function(){var e=this,t=R.a.icon({iconUrl:"https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-violet.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),a=R.a.icon({iconUrl:"https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),n=R.a.icon({iconUrl:"https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-green.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),o=this.props,l=o.center,c=o.data.map((function(t){return r.a.createElement(L.a,{key:t.properties.id,position:[t.geometry.coordinates[1],t.geometry.coordinates[0]],icon:t.properties.mask_adult<100||t.properties.mask_child<50?a:n,onClick:e.handleClick},r.a.createElement(J.a,null,r.a.createElement("h2",null,t.properties.name),r.a.createElement("br",null),"\u96fb\u8a71\uff1a",r.a.createElement("b",null,t.properties.phone),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"adult"},"\u6210\u4eba\u53e3\u7f69\uff1a",r.a.createElement(A.a,{circular:!0,color:t.properties.mask_adult>100?"green":"red"},t.properties.mask_adult)),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"child"},"\u5152\u7ae5\u53e3\u7f69\uff1a",r.a.createElement(A.a,{circular:!0,color:t.properties.mask_child>25?"green":"red"},t.properties.mask_child))))}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(K.a,{center:l,zoom:16,maxZoom:18,style:{width:"100%",height:"100%"}},r.a.createElement(W.a,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.osm.org/{z}/{x}/{y}.png"}),r.a.createElement(q.a,null,c),r.a.createElement(L.a,{position:l,icon:t},r.a.createElement(J.a,null,"\u4f60\u7684\u6240\u5728\u4f4d\u7f6e\uff01\uff01\uff01"))))}}]),t}(n.Component),V=Object(c.b)((function(e){return{center:e.center,zoom:e.zoom,data:e.data}}),{getMaskData:function(){return function(e,t){T.a.get("https://raw.githubusercontent.com/kiang/pharmacies/master/json/points.json").then((function(t){var a=t.data.features;e({type:"GET_MASKDATA",payload:a})}))}},getCoordinates:_,getNowSelectData:function(e){return{type:"GET_NOWSELECTDATA",payload:{select:e}}}})(B);a(341);var Z=function(){return r.a.createElement(u.a,{padded:!0},r.a.createElement(u.a.Row,null,r.a.createElement(u.a.Column,{width:4},r.a.createElement(M,null)),r.a.createElement(u.a.Column,{width:12,style:{height:"100vh",width:"100%"}},r.a.createElement(V,null))))},H=a(67),Q={center:[25.033671,121.564427],zoom:16,data:[],nowData:[]},Y=(a(342),window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||s.c),$=Object(s.d)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_MASKDATA":var a=t.payload;return Object(H.a)({},e,{data:a});case"GET_COORDINATES":var n=t.payload,r=n.lat,o=n.lon;return Object(H.a)({},e,{center:[r,o]});case"GET_TARGETPOSITION":var l=t.payload,c=l.lat,i=l.lon;return Object(H.a)({},e,{center:[c,i]});case"GET_NOWSELECTDATA":var s=t.payload;return Object(H.a)({},e,{nowData:s});default:return e}}),Y(Object(s.a)(i.a)));l.a.render(r.a.createElement(c.a,{store:$},r.a.createElement(Z,null)),document.getElementById("root"))}},[[185,1,2]]]);
//# sourceMappingURL=main.f31cd197.chunk.js.map